# Detect OS (Windows or Unix-based)
ifeq ($(OS),Windows_NT)
    MKDIR = if not exist $(BUILD_DIR) mkdir $(BUILD_DIR)
    RM = rmdir /s /q $(BUILD_DIR)
    EXEC_EXT = .exe
    SHELL := cmd.exe
else
    MKDIR = mkdir -p $(BUILD_DIR)
    RM = rm -rf $(BUILD_DIR)
    EXEC_EXT =
endif

# Project details
CC = gcc
SRC_DIR = src
BUILD_DIR = build
TARGET = company_management_system
SRC_FILES = $(SRC_DIR)/company_management_system.c $(SRC_DIR)/company_management.c
HEADERS = $(SRC_DIR)/company_management_system.h

# Default target
all: compile

# Run the program
run: compile
	$(BUILD_DIR)/$(TARGET)$(EXEC_EXT)

# Compile the C program
compile:
	$(MKDIR)
	$(CC) -Wall -Wextra -std=c99 -g -o $(BUILD_DIR)/$(TARGET)$(EXEC_EXT) $(SRC_FILES)
	@echo "Compilation completed."

# Clean the executable
clean:
	$(RM)
	@echo "Build cleaned."

.PHONY: compile run clean all
